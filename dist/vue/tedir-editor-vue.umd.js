(function(u,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(u=typeof globalThis<"u"?globalThis:u||self,e(u.TedirEditor={},u.Vue))})(this,function(u,e){"use strict";typeof SuppressedError=="function"&&SuppressedError;var B=function(l){l===void 0&&(l=0);var i="",s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a=String(JSON.parse(new Date().toJSON().replace(/-|T|Z|:|\./g,"")));Number(l)>=1&&(i+=String(Number(l)+1));for(var r=0;r<a.length;r++)i+=s.charAt(Math.floor(Math.random()*s.length)),i+=a.charAt(r);return i};const h=(l,i)=>{const s=l.__vccOpts||l;for(const[a,r]of i)s[a]=r;return s},H={},z={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-paragraph",viewBox:"0 0 16 16"},T=[e.createElementVNode("path",{d:"M10.5 15a.5.5 0 0 1-.5-.5V2H9v12.5a.5.5 0 0 1-1 0V9H7a4 4 0 1 1 0-8h5.5a.5.5 0 0 1 0 1H11v12.5a.5.5 0 0 1-.5.5z"},null,-1)];function M(l,i){return e.openBlock(),e.createElementBlock("svg",z,T)}const S=h(H,[["render",M]]),A={},I={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-type-h1",viewBox:"0 0 16 16"},L=[e.createElementVNode("path",{d:"M8.637 13V3.669H7.379V7.62H2.758V3.67H1.5V13h1.258V8.728h4.62V13h1.259zm5.329 0V3.669h-1.244L10.5 5.316v1.265l2.16-1.565h.062V13h1.244z"},null,-1)];function D(l,i){return e.openBlock(),e.createElementBlock("svg",I,L)}const O=h(A,[["render",D]]),R={},j={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-type-h2",viewBox:"0 0 16 16"},P=[e.createElementVNode("path",{d:"M7.638 13V3.669H6.38V7.62H1.759V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.022-6.733v-.048c0-.889.63-1.668 1.716-1.668.957 0 1.675.608 1.675 1.572 0 .855-.554 1.504-1.067 2.085l-3.513 3.999V13H15.5v-1.094h-4.245v-.075l2.481-2.844c.875-.998 1.586-1.784 1.586-2.953 0-1.463-1.155-2.556-2.919-2.556-1.941 0-2.966 1.326-2.966 2.74v.049h1.223z"},null,-1)];function q(l,i){return e.openBlock(),e.createElementBlock("svg",j,P)}const J=h(R,[["render",q]]),U={},Z={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-type-h3",viewBox:"0 0 16 16"},F=[e.createElementVNode("path",{d:"M7.637 13V3.669H6.379V7.62H1.758V3.67H.5V13h1.258V8.728h4.62V13h1.259zm3.625-4.272h1.018c1.142 0 1.935.67 1.949 1.674.013 1.005-.78 1.737-2.01 1.73-1.08-.007-1.853-.588-1.935-1.32H9.108c.069 1.327 1.224 2.386 3.083 2.386 1.935 0 3.343-1.155 3.309-2.789-.027-1.51-1.251-2.16-2.037-2.249v-.068c.704-.123 1.764-.91 1.723-2.229-.035-1.353-1.176-2.4-2.954-2.385-1.873.006-2.857 1.162-2.898 2.358h1.196c.062-.69.711-1.299 1.696-1.299.998 0 1.695.622 1.695 1.525.007.922-.718 1.592-1.695 1.592h-.964v1.074z"},null,-1)];function G(l,i){return e.openBlock(),e.createElementBlock("svg",Z,F)}const K=h(U,[["render",G]]),Q={},W={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-type-bold",viewBox:"0 0 16 16"},X=[e.createElementVNode("path",{d:"M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13H8.21zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z"},null,-1)];function Y(l,i){return e.openBlock(),e.createElementBlock("svg",W,X)}const ee=h(Q,[["render",Y]]),te={},ne={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-type-italic",viewBox:"0 0 16 16"},oe=[e.createElementVNode("path",{d:"M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z"},null,-1)];function le(l,i){return e.openBlock(),e.createElementBlock("svg",ne,oe)}const ae=h(te,[["render",le]]),ie={},ce={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-type-underline",viewBox:"0 0 16 16"},re=[e.createElementVNode("path",{d:"M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57-1.709 0-2.687-1.08-2.687-2.57V3.136zM12.5 15h-9v-1h9v1z"},null,-1)];function se(l,i){return e.openBlock(),e.createElementBlock("svg",ce,re)}const de=h(ie,[["render",se]]),he={},me={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-type-strikethrough",viewBox:"0 0 16 16"},ue=[e.createElementVNode("path",{d:"M6.333 5.686c0 .31.083.581.27.814H5.166a2.776 2.776 0 0 1-.099-.76c0-1.627 1.436-2.768 3.48-2.768 1.969 0 3.39 1.175 3.445 2.85h-1.23c-.11-1.08-.964-1.743-2.25-1.743-1.23 0-2.18.602-2.18 1.607zm2.194 7.478c-2.153 0-3.589-1.107-3.705-2.81h1.23c.144 1.06 1.129 1.703 2.544 1.703 1.34 0 2.31-.705 2.31-1.675 0-.827-.547-1.374-1.914-1.675L8.046 8.5H1v-1h14v1h-3.504c.468.437.675.994.675 1.697 0 1.826-1.436 2.967-3.644 2.967z"},null,-1)];function pe(l,i){return e.openBlock(),e.createElementBlock("svg",me,ue)}const _e=h(he,[["render",pe]]),fe={class:"editorToolbar"},ge={class:"editorMenu"},we={key:0,class:"editorMenu"},Ve=["value"],$e=["srcdoc"],ve={class:"editorStatusbar"},Ee={class:"editorMenu"},be={class:"editorItem plain"},ke={class:"editorMenu"},Ne={class:"editorItem plain"},xe=e.defineComponent({__name:"TextEditor",props:{modelValue:{default:"<p>Start writing...</p>"},height:{default:"300px"},showCode:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:i}){const s=l,a=e.ref(""),r=e.ref(""),d=e.ref([]),m=e.ref(null),f=e.ref(null),_=e.ref(null),v=e.ref(null),g=e.ref(s.modelValue||"<p></p>"),p=e.ref("text");B();const ye=e.computed(()=>`<!doctype html>
<html>
  <head>
    <style>
      body { height: 100%; padding: 15px; margin: 0px; }
      
      [data-tag=p] { margin-top: 0.5rem; margin-bottom: 0.5rem; }
      
      [data-tag=h1], 
      [data-tag=h2], 
      [data-tag=h3] { margin-top: 0.5rem; margin-bottom: 0.5rem; font-weight: bold; line-height: 1.2; }
    
      [data-tag=h1] { font-size: 32px; }
    
      [data-tag=h2] { font-size: 24px; }
    
      [data-tag=h3] { font-size: 16px; }
    
      [data-tag=b],
      [data-tag=strong] { font-weight: bolder; }
    
      [data-tag=i],
      [data-tag=em] { font-style: italic; }
    
      [data-tag=u] { text-decoration: underline; }
    
      [data-tag=s] { text-decoration: line-through; }
    </style>
  </head>
  <body contenteditable="true" spellcheck="false">
    ${g.value.replace(/\<(p|h1|h2|h3)\>/g,'<div data-tag="$1">').replace(/\<\/(p|h1|h2|h3)\>/g,"</div>").replace(/\<(b|i|u|s)\>/g,'<span data-tag="$1">').replace(/\<\/(b|i|u|s)\>/g,"</span>")}
  </body>
</html>`);e.onMounted(()=>{setTimeout(()=>{if(m.value!==null){const n=m.value.contentDocument,t=[].slice.call(n.body.children);for(let o of t)o.addEventListener("click",c=>{c.preventDefault(),k(c.target),E(o.children)});n.addEventListener("selectionchange",x)}},200)}),e.onUpdated(()=>{setTimeout(()=>{if(m.value!==null){const n=m.value.contentDocument,t=[].slice.call(n.body.children);for(let o of t)o.addEventListener("click",c=>{c.preventDefault(),k(c.target),E(o.children)});n.addEventListener("selectionchange",x)}},200)}),e.watch(p,()=>{g.value=s.modelValue}),e.watch(g,()=>{V()});const k=n=>{(n==null?void 0:n.tagName.toLowerCase())==="div"&&(f.value=n,a.value=n.getAttribute("data-tag"),d.value=[])},w=()=>{f.value!==null&&f.value.tagName.toLowerCase()==="div"&&(f.value.setAttribute("data-tag",a.value),V())},E=n=>{const t=[].slice.call(n);for(let o of t)o.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),d.value=[],Be(c.target.parentElement),d.value.push(c.target.getAttribute("data-tag")),_.value=c.target,E(o.children)})},Be=n=>{n.tagName.toLowerCase()!=="div"&&d.value.unshift(n.getAttribute("data-tag"))},N=e.ref(null),V=()=>{clearTimeout(N.value),N.value=setTimeout(()=>{if(m.value!==null){const o=[].slice.call(m.value.contentDocument.body.children).map(c=>{const y=c.getAttribute("data-tag");return`<${y}>${b(c.childNodes)}</${y}>`}).join(`
`).replaceAll("<null></null>","").replaceAll("<null>","<p>").replaceAll("</null>","</p>");i("update:modelValue",o)}},300)},b=n=>{let t="";for(let o of n)if(o.nodeName==="#text")t=t+o.nodeValue;else if(o.childNodes){const c=o.getAttribute("data-tag");c==="span"?t=t+b(o.childNodes):t=t+`<${c}>${b(o.childNodes)}</${c}>`}return t},x=n=>{r.value="";const t=m.value.contentDocument.getSelection();(Number((t==null?void 0:t.anchorOffset)||0)!==0&&Number((t==null?void 0:t.focusOffset)||0)!==0||Number((t==null?void 0:t.anchorOffset)||0)<Number((t==null?void 0:t.focusOffset)||0))&&(v.value=t)},$=()=>{if(v.value!==null){const n=v.value.getRangeAt(0);if(n.toString().length>=2){const t=m.value.contentDocument.createElement("span");t.setAttribute("data-tag",r.value),n.surroundContents(t)}else _.value!==null&&(_.value.getAttribute("data-tag")==="span"?C(_.value.parentElement):_.value.setAttribute("data-tag","span"));V()}},C=n=>{["b","i","u","s"].includes(n.getAttribute("data-tag"))&&(n.setAttribute("data-tag","span"),C(n))};return(n,t)=>(e.openBlock(),e.createElementBlock("div",{class:"editor editorText tedirEditor",onMouseout:V},[e.createElementVNode("div",fe,[e.createElementVNode("ul",ge,[e.createElementVNode("li",{class:e.normalizeClass(["editorItem",a.value==="p"?"active":""]),onClick:t[0]||(t[0]=o=>{a.value="p",w()})},[e.createVNode(S)],2),e.createElementVNode("li",{class:e.normalizeClass(["editorItem",a.value==="h1"?"active":""]),onClick:t[1]||(t[1]=o=>{a.value="h1",w()})},[e.createVNode(O)],2),e.createElementVNode("li",{class:e.normalizeClass(["editorItem",a.value==="h2"?"active":""]),onClick:t[2]||(t[2]=o=>{a.value="h2",w()})},[e.createVNode(J)],2),e.createElementVNode("li",{class:e.normalizeClass(["editorItem",a.value==="h3"?"active":""]),onClick:t[3]||(t[3]=o=>{a.value="h3",w()})},[e.createVNode(K)],2),e.createElementVNode("li",{class:e.normalizeClass(["editorItem",d.value.includes("b")?"active":""]),onClick:t[4]||(t[4]=o=>{r.value="b",$()})},[e.createVNode(ee)],2),e.createElementVNode("li",{class:e.normalizeClass(["editorItem",d.value.includes("i")?"active":""]),onClick:t[5]||(t[5]=o=>{r.value="i",$()})},[e.createVNode(ae)],2),e.createElementVNode("li",{class:e.normalizeClass(["editorItem",d.value.includes("u")?"active":""]),onClick:t[6]||(t[6]=o=>{r.value="u",$()})},[e.createVNode(de)],2),e.createElementVNode("li",{class:e.normalizeClass(["editorItem",d.value.includes("s")?"active":""]),onClick:t[7]||(t[7]=o=>{r.value="s",$()})},[e.createVNode(_e)],2)]),l.showCode===!0?(e.openBlock(),e.createElementBlock("ul",we,[e.createElementVNode("li",{class:e.normalizeClass(["editorItem",{active:p.value==="text"}]),onClick:t[8]||(t[8]=o=>p.value="text")},"Editor",2),e.createElementVNode("li",{class:e.normalizeClass(["editorItem",{active:p.value==="html"}]),onClick:t[9]||(t[9]=o=>p.value="html")},"HTML",2)])):e.createCommentVNode("",!0)]),l.showCode===!0&&p.value==="html"?(e.openBlock(),e.createElementBlock("textarea",{key:0,class:"editorContent",value:l.modelValue,style:e.normalizeStyle({height:l.height}),readonly:""},null,12,Ve)):(e.openBlock(),e.createElementBlock("iframe",{key:1,ref_key:"editorContentRef",ref:m,src:"about:blank",srcdoc:e.unref(ye),class:"editorContent",style:e.normalizeStyle({height:l.height})},null,12,$e)),e.createElementVNode("div",ve,[e.createElementVNode("ul",Ee,[e.createElementVNode("li",be,e.toDisplayString(a.value)+" "+e.toDisplayString(d.value.length>=1?"\u203A "+d.value.join(" \u203A "):""),1)]),e.createElementVNode("ul",ke,[e.createElementVNode("li",Ne,"Total: "+e.toDisplayString(String(g.value).split(" ").length)+" words",1)])])],32))}}),De="",Ce=h(xe,[["__scopeId","data-v-9504dd82"]]);u.TextEditor=Ce,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
